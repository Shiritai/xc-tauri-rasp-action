# xc-tauri-rasp-action

Github action that utilize [`xc-tauri-rasp`](https://github.com/Shiritai/xc-tauri-rasp) to build debian package for raspberry pi.

## Parameters

Currently all parameters are optional. No outputs but generates one debian package artifact.

For the `inputs.image`, default is to build the image from zero using `xc-tauri-rasp` script. You may like to assign it to skip the building process and speed up the CI flow.

```yml
# Partial lines content in `action.yml`
inputs:
  image:
    description: "Image to do cross compilation, which should be the intermediates generated by xcompile.sh in xc-tauri-rasp"
    required: false
    default: ""
  arch:
    description: "Architecture of raspberry pi"
    required: false
    default: arm64
  env:
    description: "Debian version of compilation environment"
    required: false
    default: bookworm
  path:
    description: "Root path of tauri project"
    required: false
    default: ${{ github.workspace }}
  project-name:
    description: "Name of the project, will be the prefix of the produced debian package"
    required: false
    default: "project"
```

For other parameters, you can check [`xc-tauri-rasp`](https://github.com/Shiritai/xc-tauri-rasp) for more details. Currently they are the same as what `xc-tauri-rasp/xcompile.sh -h` provides.

```bash
> ./xcompile.sh -h

Cross compile a rust tauri application to debian package for raspberry pi (armhf/arm64).

Syntax: ./xcompile.sh [-c|h] [-e|n|p|t|a ARG]

Option:
  -e <DEBIAN_VERSION>
          to set debian version of compilation environment
          available versions are bookworm (debian 12, default) and bullseye (debian 11)
  -n <PROJECT_NAME>
          to set compilation target project
          default value is project
  -p <PROJECT_PATH>
          to set path of project to be compiled
          default value is ./project
  -t <TARGET_PATH>
          to set path of compilation target path
          default value is .
  -a <RASP_ARCH>
          to set architecture of raspberry pi
          default value: arm64
  -c      clean up all compilation targets before cross compilation
          default not to clean up
  -h      show the help message
```
